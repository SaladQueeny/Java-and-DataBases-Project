# Access control system application

Javafx project with a database that allows you to add, find, and edit information about access control

# How to run
1. Install MySQL and Eclipse 
2. Import "BAZA_for_mysql.sql"
3. Import mysql-connector-java.jar in modulepath
4. Add vm arguments in run configuration --module-path ~\openjfx-11.0.2_windows-x64_bin-sdk\javafx-sdk-11.0.2\lib --add-modules javafx.controls,javafx.fxml
5. Check password in src\application\configs


# Description of this project

## Постановка задачи

Разработать и реализовать базу данных для заявленной предметной области:
1.	Описать предметную область, выделить правила и ограничения.
2.	Построить логическую модель, определить атрибуты, идентификаторы, связи.
3.	Перейти к реляционной модели. Уточнить типы данных, разрешить связи многие-ко-многим, описать ограничения.
4.	Создать базу данных в MySQL. При необходимости, добавить ограничения, не учтенные в модели. Внести тестовые данные, проверить правильность работы ограничений.
5.	Создать клиентское приложение.
6.	Описывать и реализовать план тестирования приложения.


## Описание предметной области

Система контроля управления доступом. 

При запуске приложения появляется меню входа, есть возможность выбора сотрудника или администратора.
Администратор контролирует всё происходящее. Он может посмотреть всю информацию из таблиц, посмотреть информацию по каждой комнате, изменить ей уровень доступа, посмотреть лист посещения этой комнаты. Может посмотреть информацию по каждому сотруднику, изменить его уровень доступа, удалить сотрудника вообще или добавить нового.
Сотрудник может поменять себе пароль, посмотреть о себе информацию, посмотреть доступную информацию о комнате и войти в неё.
Для наглядного представления того, как сможет каждый пользователь использовать разрабатываемое приложение, я проиллюстрирую всё UML-диаграммой вариантов использования use-case, представленной на рисунке 1.

 ![image](https://user-images.githubusercontent.com/70723969/133934392-6d4bb63f-cdf9-4f3b-a8c0-cd6ffa152929.png)

Рис. 1 – UML-диаграмма вариантов использования
 
 
## Реляционная модель

ER-модель используется для описание концептуальных схем предметной области. С ее помощью можно выделить ключевые сущности и обозначить связи, которые могут устанавливаться между этими сущностями.

Основные сущности, которые я выделила: сотрудник, уровень доступа сотрудника, уровень доступа кабинетов, лист визитов, тип доступа для комнаты, список комнат.
На реляционной модели, представленной на рисунке 3, наглядно видно тип каждого атрибута, а также первичные и внешние ключи. Реляционная модель построена в программе MySQL Workbench.
 
 ![image](https://user-images.githubusercontent.com/70723969/133934440-f99bdfe5-0547-4a58-a3a1-b7119d0a4b70.png)

Рис. 2 – Реляционная модель модель

### Доказательство соответствия НФБК

_Первая нормальная форма:_

Все отношения находятся в первой нормальной форме, так как содержат только скалярные значения атрибутов и ни один из ключевых атрибутов не содержит значение NULL.
Ключевой атрибут – атрибут, входящий в любой из потенциальных ключей.

_Вторая нормальная форма:_

Все отношения находятся во второй нормальной форме, так как они удовлетворяют определению первой нормальной формы и все его атрибуты, не входящие в первичный ключ, неприводимо зависят от него.

Функциональная зависимость называется неприводимой, если выполняются следующие условия: 
- правая (зависимая) часть является одноэлементным множеством, то есть справа находится только один атрибут; 
- левая часть (детерминант) является неприводимой, то есть ни один атрибут из детерминанта не может быть опущен без потери ФЗ. 

_Третья нормальная форма:_

Все таблицы находятся в третьей нормальной форме, так как они удовлетворяют определению второй нормальной формы и ни один из его неключевых атрибутов не зависит функционально от любого другого неключевого атрибута.

_Нормальная форма Бойса-Кодда:_

Отношение находится в нормальной форме Бойса-Кодда, тогда и только тогда, когда все детерминанты нетривиальных и неприводимых ФЗ являются потенциальными ключами. Нормальная форма Бойса-Кодда – это частный случай третьей нормальной формы для отношений, имеющих один потенциальный ключ.

Все таблицы находятся в нормальной форме Бойса-Кодда, так как каждая нетривиальная и неприводимая слева функциональная зависимость обладает потенциальным ключом в качестве детерминанта

В моей базе данных представлены таблицы, для которых соответсвие нормальной форме Бойса-Кодда вытекает из соответствия таблиц третьей нормальной форме. 

 
## Построение базы данных

Для разработки баз данных я использую MySQL, а именно – MySQL WorkBench.
Скрипт, создающий и наполняющий базы данных, приведен есть в проекте: [BAZA_for_mysql.sql](https://github.com/SaladQueeny/Java-and-DataBases-Project/blob/main/BAZA_for_mysql.sql).

Таблица EMPLOYEE:

 ![image](https://user-images.githubusercontent.com/70723969/133934773-1aa37ffe-9c14-4a01-8442-d02188a52779.png)

Таблица ROOM:

 ![image](https://user-images.githubusercontent.com/70723969/133934776-ecb6b03d-33ff-4fa2-8736-6fbbcd93b9ca.png)

Таблица ADMIN:

 ![image](https://user-images.githubusercontent.com/70723969/133934780-26c9aa95-b0c7-4948-bc6c-1a2262dcfe91.png)

Таблица LIST_OF_VISITS:

![image](https://user-images.githubusercontent.com/70723969/133934791-4e30e742-0611-417f-b74c-8513ef8734cb.png)

Таблица ACCESS_DEVICE:

![image](https://user-images.githubusercontent.com/70723969/133934795-5e97f16c-f48f-4f5f-ba90-6ea97529179f.png)

Таблица ACCESS_OPTION:

 ![image](https://user-images.githubusercontent.com/70723969/133934803-c44b7c37-1ba1-4391-8702-8ed27c6a1c8e.png)

Таблица SUCURITY_LEVEL:

 ![image](https://user-images.githubusercontent.com/70723969/133934807-07ca718a-9799-4123-ba3d-3c83deffa665.png)

Таблица SUCURITY_LEVEL_EMPLOYEE:

 ![image](https://user-images.githubusercontent.com/70723969/133934809-0667d014-331f-41dc-8f14-26127ad68d5a.png)

Таблица SUCURITY_LEVELNAME:

 ![image](https://user-images.githubusercontent.com/70723969/133934812-4fdce1b5-1e93-4ff8-8849-2b91608c6191.png)

 
## Возможности приложения 

При запуске приложения от пользователя появится окно, представленное на рисунке 3, 4.
 
 ![image](https://user-images.githubusercontent.com/70723969/133934826-d3e35cbf-3a83-4f9a-9533-f1bcba065359.png)

Рис. 3 – Главное окно
Пользователь должен выбрать свою роль и ввести свой логин и пароль в зависимости от роли.
 
 ![image](https://user-images.githubusercontent.com/70723969/133934830-06acd207-709d-497c-9a3c-4fe5371f2dd7.png)

Рис. 4 – Главное окно

Если логин или пароль неверный, это поля трясутся.
  
### Возможности сотрудника
Если текущий пользователь приложения – сотрудник, при нажатии на кнопку `sign in`, он увидит следующее окно:
 
 ![image](https://user-images.githubusercontent.com/70723969/133934976-30b6fe2e-ab0b-4201-b8ee-d9cf68a81a43.png)

Рис. 5 – Окно для сотрудника

Далее сотрудник может увидеть информацию о себе, или выбрать 2 действия: `change password` или `choose room`. При выборе первого варианта появится меню на рисунке 6 и при подтверждении смены пароля появится уведомление на рисунке 7.
 
 ![image](https://user-images.githubusercontent.com/70723969/133934979-d0415b3c-599d-498b-8e02-d8870c689d79.png)

Рис. 6 – Окно для смены пароля у сотрудника

Пароль изменён:
 
 ![image](https://user-images.githubusercontent.com/70723969/133934981-401195ba-56da-4c60-a52d-2058e97e08ee.png)

Рис. 7 – Успешная смена пароля

Если выбрать пункт выбора кабинета, то появится интерактив на рисунках с 8 по 10. Если не будет выбран кабинет, но кнопку `choose` попытаются нажать,  то всплывающее меню с кабинетами будет трястись.
 
 ![image](https://user-images.githubusercontent.com/70723969/133934983-59e37602-f2cd-4ae5-9d83-3c8290ea14ac.png)

Рис. 8 – Выбор комнаты

В данном случае сотрудник может посетить комнату и кнопка 'enter room' активная, если уровень доступа сотрудника меньше чем у комнаты, то кнопка не будет активна и сотрудник не сможет её посетить
 
 ![image](https://user-images.githubusercontent.com/70723969/133934987-8a3e5324-db99-4f3c-b103-f8737ce27e2c.png)

Рис. 9 – Выбрана определенная комната
 
 ![image](https://user-images.githubusercontent.com/70723969/133934989-7abb1e4a-21c6-4da8-8c3a-88d24db81898.png)

Рис. 10 – Меню после посещения комнаты

Кнопка `end interaction` возвращает в первоначальное меню работника на рисунке 6, а кнопка `log out` возвращает в первоначальное меню на рисунке 3.

### Возможности администратора
При запуске приложения от администратора появится окно, представленное на рисунке 11. 
 
 ![image](https://user-images.githubusercontent.com/70723969/133935502-05d52e6d-cae8-4cc1-8ca5-7e68d3435a9d.png)

Рис. 11 – Начальный экран меню администратора

Администратор может выбрать несколько действий: перейти в главное меню (кнопка `log out`), выбор комнаты (кнопка `choose room`), выбор сотрудника (кнопка `choose employee`), добавление сотрудника (кнопка `add employee`), просмотр общей информации из таблиц (кнопка “show all info”). При выборе какой-то определенной команды остальные команды скрываются и появляется кнопка `end interaction`. При нажатии кнопки `end interaction` появляется меню на рисунке 11.
При нажатии на кнопку выбора комнаты появляется меню на рисунке 12. Появляется информация обо всех комнатах, и администратор может выбрать конкретную комнату, при вводе неправильного номера комнаты поле `room id` будет трястись.
 
 ![image](https://user-images.githubusercontent.com/70723969/133935504-d378f787-391a-44fa-bc85-cd48b4639c6a.png)

Рис. 12 – Меню при нажатии `choose room`

При правильном выборе комнаты у администратора появляется информация об этой комнате и также дополнительные возможности: поменять уровень доступа у этой комнаты (кнопка `change security level`), посмотреть список посещений для этой комнаты (кнопка `show list of visits`).
 
 ![image](https://user-images.githubusercontent.com/70723969/133935506-055c490c-0e00-4c29-a8bc-8eaf6ae18b17.png)

Рис. 13 – Меню после выбора конкретной комнаты

При выборе показа списка посещений появится меню на рисунке 14.
 
 ![image](https://user-images.githubusercontent.com/70723969/133935508-24d1bf74-3f87-4f95-9b2e-381db9d830b4.png)

Рис. 14 – Меню после выбора показа списка посещений

При выборе изменения уровня доступа появится меню на рисунке 15. 
 
 ![image](https://user-images.githubusercontent.com/70723969/133935512-0a8cba65-0ac0-4c22-87fe-224a3705aa5f.png)

Рис. 15 – Меню после выбора изменения уровня доступа

Уровень доступа можно изменить только если введен правильно старый и новый отличается от старого. После этого появится уведомление об успешной смене уровня доступа, и информация в поле об этой комнате обновится. 
 
 ![image](https://user-images.githubusercontent.com/70723969/133935513-4436cffc-5c9a-404e-bfb0-3b7805498ca9.png)

Рис. 16 – Успешное изменение уровня доступа

При нажатии на кнопку выбора сотрудника появляется меню на рисунке 17. Появляется информация обо всех сотрудниках, и администратор может выбрать конкретного сотрудника, при вводе неправильного номера сотрудника поле `employee id` будет трястись.
 
 ![image](https://user-images.githubusercontent.com/70723969/133935515-9d1c886d-8797-4245-8f44-1b919490ad26.png)

Рис. 17 – Меню при нажатии `choose employee`

При правильном выборе сотрудника у администратора появляется информация об этом сотруднике и также дополнительные возможности: поменять уровень доступа у этого сотрудника (кнопка `change security level`), удалить сотрудника (кнопка `delete employee`).
 
 ![image](https://user-images.githubusercontent.com/70723969/133935524-514ced21-1be2-45ca-8b7b-403089a72e9f.png)

Рис. 18 – Меню после выбора конкретного сотрудника

При выборе изменения уровня доступа появится меню на рисунке 19. 
 
 ![image](https://user-images.githubusercontent.com/70723969/133935528-59405d44-5f8b-4636-965d-cc24fca93b00.png)

Рис. 19 – Меню после выбора изменения уровня доступа

Уровень доступа можно изменить только если введен правильно старый и новый отличается от старого. После этого появится уведомление об успешной смене уровня доступа, и информация в поле об этом сотруднике обновится. 
 
 ![image](https://user-images.githubusercontent.com/70723969/133935549-b00e88f9-d5ba-44fc-b9c9-119dfc47fcce.png)

Рис. 20 – Успешное изменение уровня доступа

При выборе удаления сотрудника появится меню на рисунке 21.
 
 ![image](https://user-images.githubusercontent.com/70723969/133935553-06dc8814-26ea-4d1e-b5de-e91bdd9c034f.png)

Рис. 21 – Меню при выборе удаления сотрудника

При подтверждении удаления появится надпись с подтверждением удаления рисунок 22.
 
 ![image](https://user-images.githubusercontent.com/70723969/133935555-8c7971e2-f0b8-47ed-9d19-a8c7806dc229.png)

Рис. 22 – Подтверждение удаления сотрудника.

При нажатии на кнопку `add employee` появляется меню на рисунке 23. При нажатии на кнопку `back` администратор вернётся на своё основное меню на рисунке 11. Появятся поля, которые необходимо заполнить по определенным шаблонам для успешного добавления сотрудника, иначе поля будут трястись показывая, что что-то заполнено неправильно. Регулярные выражения для разных полей:
Id: `"[0-9]{4,}"`
First name: `"[a-zA-Z]{2,}"`
Last name: `"[a-zA-Z]{2,}"`
e-mail: `"[A-Za-z]+@{1}[A-Za-z]+.{1}[A-Za-z]+"`
Phone number: `"[+]?[7-8][0-9]{3}[0-9]{3}-?[0-9]{2}-?[0-9]{2}"`
Password: `"[0-9]{5,}"`
Security level: `"[0-9]{1}"`
 
 ![image](https://user-images.githubusercontent.com/70723969/133935558-5f7771cd-c8c5-4c02-9075-86c6c887386f.png)

Рис. 23 – Меню добавления сотрудника.
 
 ![image](https://user-images.githubusercontent.com/70723969/133935563-2e37d71b-dd57-4da4-a474-67650d3d7ced.png)

Рис. 23 – Успешное добавление сотрудника.

При выборе кнопки `show all info` появляется меню на рисунке 24, при корректном выборе таблицы и нажатии на кнопку `choose` появится информация о выбранной таблице (рисунок 25).
 
 ![image](https://user-images.githubusercontent.com/70723969/133935569-1bb73c75-0c62-427e-b85e-a4c009d0da11.png)

Рис. 24 – Меню просмотра полной информации из таблиц.
 
 ![image](https://user-images.githubusercontent.com/70723969/133935572-b9cef841-2f30-441a-a834-9aff78724091.png)

Рис. 25 –Просмотр полной информации из таблицы.

### Диаграмма классов

На рисунке 26 представлена диаграмма классов, на которой отображены все классы, которые используются в моей приложении. 
 
 ![image](https://user-images.githubusercontent.com/70723969/133935576-75766a20-1f85-4e49-89e3-6a2279812c6c.png)

Рис. 26 – Диаграмма классов

На диаграмме отражены используемых методов, в каждом из который отображены объявленные переменные и методы.
